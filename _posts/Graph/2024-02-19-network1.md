---
title: "[Graph Theory]Betweenness Centrality(매개 중심성)"
categories: 
  - Graph
  
toc: true
toc_sticky: true

date: 2024-03-13
last_modified_at: 2024-03-13
--
# Centrality
## 1. Degree Dependant Centrality
Betweenness centrality는 최단 거리(shortest path)에 기반해 그래프의 중심성(centrality)을 측정하는 것이다. 중심성이란 정점(vertex)의 상대적 중요성을 나타내는 척도이다. 

- 중심성(Centrality): 지수로 계산됨
    - 연결 중심성(Degree Centrality)
    - 근접 중심성(Closeness Cetrality)
    - 매개 중심성(Betweenness Centrality)
    - 고유벡터 중심성(Eigenvector Centrality)
 
Betweenness Centrality를 ‘한 정점이 다른 두 정점 사이의 경로에 얼마나 자주 위치하는가?’를 수치화 한 것이다. Betwenness Centrality가 높은 정점은 그래프 안에서 rich-informative한 정점이라고 할 수 있다. 반면, 이 값이 작으면 그래프 안에서 중요도가 떨어지는 poorly informative한 정점이다.

### 1) 연결 중심성(Degree Centrality, $$C_d$$)

<p align="center">
<img width="500" alt="1" src="https://github.com/meaningful96/Deep_Learning/assets/111734605/3ad75787-1b3f-417c-9bc0-f7af1804d82b">
</p>

- 정점: A, B, C, D, E
- 간선: (A, B), (A, E), (B, C), (B, E), (C, E), (D, E)
- 인접 행렬(Adjacency Matrix)

$$A=  \begin{pmatrix}  0&1&0&0&1 \\ 
1&0&1&0&1 \\
0&1&0&0&1 \\
0&0&0&0&1 \\
1&1&1&1&0 
 \end{pmatrix}$$

$$C_d$$는 가장 간단한 중심성 척도이다. 한 정점에 연결된 모든 간선의 수로 중심성을 평가한다. 위의 예시에서 $$C_d$$는 $$\begin{pmatrix}2&3&2&1&4 \end{pmatrix}^T$$이다. 이는 다시 말해 한 정점과 직접적으로 연결된 간선의 수이다. 인접행렬의 각 요소를 $$a_{ij}$$라 할 때, 인접행렬에서 i번째 위치한 정점의 degree centrality는 $$\sum_j a_{ij}$$가 된다. 이처럼 undirected graph에서는 정점과 연결된 간선의 수가 곧 그래프에서 그 정점의 popularity가 된다.

반면, 지식 그래프와 같은 directed graph에서는 간선에 방향성이 생기기 때문에 In-degree와 Out-degree로 계산되는 centrality는 다른 의미를 가지게 된다. In-degree가 정점으로 들어오는 간선에 해당하며 이는 곧 그 정점의 popularity를 반영한다. Out-degree의 경우 정점에서 뻗어 나가는 간선에 해당하며 이는 그 정점이 다른 정점에 영향을 많이 끼치는 것을 의미하므로, 해당 정점의 영향력을 반영하게된다. 두 경우 모두 크면 클 수록 그래프에서 <span style = “color: gold”>**rich-informative**</span>한 정점이라고 말할 수 있다. 

단순히 연결 중심성으로만 네트워크의 중심성 비교를 수행하기는 어렵다. 크기가 큰 그래프일수록 당연히 $$C_d$$값도 커지기 때문에 공정한 비교는 불가능하다. 따라서 비교의 공정성을 주고자 정규화를 진행하기도 한다. $$N$$개의 정점을 가지는 그래프 내 가능한 최대 $$C_d$$값은 $$N-1$$이며 이 값을 나눈값을 사용하거나, 실제로 측정한 $$C_d$$의 최댓값을 나눈다.

$$C_d = A \cdot \vec{1} \;\; \\ \vec{1} = 1 \times N \; \text{vector}$$

### 2) 고유벡터 중심성(Eigenvector Centrality, $$C_e$$)
그래프에서 무작정 연결된 정점이 많다고 rich-informative하다고 말하긴 어렵다. 만약 한 정점의 degree가 100이고, 그 정점과 연결된 100개의 정점의 평균 degree가 2이면 전체 그래프에서 이 subgraph부분은 중요한 정보가 아닐 수 있다(일종의 outlier). 연결 중심성은 이러한 것처럼 단순히 degree만 고려한다는 점에서 한계를 보인다. 이를 보완하고자 나온 것이 바로 고유벡터 중심성(eigenvector centrality, $C_e$)이다. 이는 중심성을 계산할 때 <span style=”color:gold”>다른 정점의 중심성도 반영하여 계산</span>한다.

$$\lambda C_e = AC_e$$

$$A$$ 가 그래프의 인접 행렬이고, $$C_e$$는 중심성을 나타내는 $$1 x N$$ 행렬이다. 위의 인접행렬식을 사용해 계산하면 $$C_e = \begin{pmatrix}0.882&1.121&0.882&0.464&1.247 \end{pmatrix}^T$$이 된다.

